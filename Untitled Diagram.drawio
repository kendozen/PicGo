<mxfile host="app.diagrams.net" modified="2021-06-11T10:08:57.010Z" agent="5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/87.0.4280.88 Safari/537.36" etag="9cC106xVwhoVjcWQryuM" version="14.6.12" type="github">
  <diagram id="ABdyxY0PqJIlRWbteTXv" name="Page-1">
    <mxGraphModel dx="1278" dy="532" grid="0" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="850" pageHeight="1100" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="C8QnYAMO25dNlmI6MnM--65" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="C8QnYAMO25dNlmI6MnM--1" target="C8QnYAMO25dNlmI6MnM--2" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="124.99999999999977" y="120.00000000000011" as="targetPoint" />
            <Array as="points">
              <mxPoint x="150" y="120" />
              <mxPoint x="150" y="237" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="C8QnYAMO25dNlmI6MnM--1" value="1. front page" style="pointerEvents=1;shadow=0;dashed=0;html=1;strokeColor=none;fillColor=#505050;labelPosition=center;verticalLabelPosition=bottom;verticalAlign=top;outlineConnect=0;align=center;shape=mxgraph.office.concepts.web_page;" parent="1" vertex="1">
          <mxGeometry x="30" y="93" width="50" height="54" as="geometry" />
        </mxCell>
        <mxCell id="C8QnYAMO25dNlmI6MnM--67" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="C8QnYAMO25dNlmI6MnM--2" target="C8QnYAMO25dNlmI6MnM--3" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="C8QnYAMO25dNlmI6MnM--2" value="CloudFlare" style="aspect=fixed;html=1;points=[];align=center;image;fontSize=12;image=img/lib/azure2/networking/DNS_Zones.svg;" parent="1" vertex="1">
          <mxGeometry x="200" y="205" width="64" height="64" as="geometry" />
        </mxCell>
        <mxCell id="C8QnYAMO25dNlmI6MnM--68" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="C8QnYAMO25dNlmI6MnM--3" target="C8QnYAMO25dNlmI6MnM--4" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="C8QnYAMO25dNlmI6MnM--3" value="CDN" style="shape=image;html=1;verticalAlign=top;verticalLabelPosition=bottom;labelBackgroundColor=#ffffff;imageAspect=0;aspect=fixed;image=https://cdn2.iconfinder.com/data/icons/whcompare-isometric-web-hosting-servers/50/connected-globe-128.png" parent="1" vertex="1">
          <mxGeometry x="370" y="192" width="90" height="90" as="geometry" />
        </mxCell>
        <mxCell id="C8QnYAMO25dNlmI6MnM--69" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="C8QnYAMO25dNlmI6MnM--4" target="C8QnYAMO25dNlmI6MnM--11" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="C8QnYAMO25dNlmI6MnM--4" value="F5" style="strokeColor=#666666;html=1;labelPosition=right;align=left;spacingLeft=15;shadow=0;dashed=0;outlineConnect=0;shape=mxgraph.rack.f5.big_ip_6900;" parent="1" vertex="1">
          <mxGeometry x="570" y="217" width="128" height="40" as="geometry" />
        </mxCell>
        <mxCell id="C8QnYAMO25dNlmI6MnM--9" value="1. front page" style="pointerEvents=1;shadow=0;dashed=0;html=1;strokeColor=none;fillColor=#505050;labelPosition=center;verticalLabelPosition=bottom;verticalAlign=top;outlineConnect=0;align=center;shape=mxgraph.office.concepts.web_page;" parent="1" vertex="1">
          <mxGeometry x="30" y="320" width="50" height="54" as="geometry" />
        </mxCell>
        <mxCell id="C8QnYAMO25dNlmI6MnM--63" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="C8QnYAMO25dNlmI6MnM--10" target="C8QnYAMO25dNlmI6MnM--2" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="C8QnYAMO25dNlmI6MnM--10" value="1. front page" style="pointerEvents=1;shadow=0;dashed=0;html=1;strokeColor=none;fillColor=#505050;labelPosition=center;verticalLabelPosition=bottom;verticalAlign=top;outlineConnect=0;align=center;shape=mxgraph.office.concepts.web_page;" parent="1" vertex="1">
          <mxGeometry x="30" y="210" width="50" height="54" as="geometry" />
        </mxCell>
        <mxCell id="C8QnYAMO25dNlmI6MnM--70" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="C8QnYAMO25dNlmI6MnM--11" target="C8QnYAMO25dNlmI6MnM--12" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="C8QnYAMO25dNlmI6MnM--72" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="C8QnYAMO25dNlmI6MnM--11" target="C8QnYAMO25dNlmI6MnM--57" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="963.5" y="237.5000000000001" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="C8QnYAMO25dNlmI6MnM--11" value="Nginx" style="shape=image;html=1;verticalAlign=top;verticalLabelPosition=bottom;labelBackgroundColor=#ffffff;imageAspect=0;aspect=fixed;image=https://cdn4.iconfinder.com/data/icons/logos-brands-5/24/nginx-128.png" parent="1" vertex="1">
          <mxGeometry x="810" y="193" width="89" height="89" as="geometry" />
        </mxCell>
        <mxCell id="C8QnYAMO25dNlmI6MnM--12" value="Varnish Cache" style="verticalLabelPosition=bottom;aspect=fixed;html=1;verticalAlign=top;strokeColor=none;align=center;outlineConnect=0;shape=mxgraph.citrix.cache_server;" parent="1" vertex="1">
          <mxGeometry x="819" y="360" width="71" height="97.5" as="geometry" />
        </mxCell>
        <mxCell id="C8QnYAMO25dNlmI6MnM--73" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="C8QnYAMO25dNlmI6MnM--57" target="C8QnYAMO25dNlmI6MnM--58" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="C8QnYAMO25dNlmI6MnM--57" value="Services" style="shape=image;verticalLabelPosition=bottom;labelBackgroundColor=#ffffff;verticalAlign=top;aspect=fixed;imageAspect=0;image=data:image/svg+xml,PHN2ZyB4bWxuczpjYz0iaHR0cDovL2NyZWF0aXZlY29tbW9ucy5vcmcvbnMjIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHhtbG5zOmlua3NjYXBlPSJodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy9uYW1lc3BhY2VzL2lua3NjYXBlIiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIgeG1sbnM6c3ZnPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0ic3ZnMTc1IiBpbmtzY2FwZTp2ZXJzaW9uPSIwLjkyLjMgKDI0MDU1NDYsIDIwMTgtMDMtMTEpIiBzb2RpcG9kaTpkb2NuYW1lPSJjbG91ZF9ibGFjay5zdmciIHg9IjBweCIgeT0iMHB4IiB2aWV3Qm94PSIwIDAgOTguNjMgNjIuMTEiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDk4LjYzIDYyLjExOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+JiN4YTs8c29kaXBvZGk6bmFtZWR2aWV3IGJvcmRlcmNvbG9yPSIjNjY2NjY2IiBib3JkZXJvcGFjaXR5PSIxIiBmaXQtbWFyZ2luLWJvdHRvbT0iMCIgZml0LW1hcmdpbi1sZWZ0PSIwIiBmaXQtbWFyZ2luLXJpZ2h0PSIwIiBmaXQtbWFyZ2luLXRvcD0iMCIgZ3JpZHRvbGVyYW5jZT0iMTAiIGd1aWRldG9sZXJhbmNlPSIxMCIgaWQ9Im5hbWVkdmlldzE3NyIgaW5rc2NhcGU6Y3VycmVudC1sYXllcj0ic3ZnMTc1IiBpbmtzY2FwZTpjeD0iODguNDM3NzM5IiBpbmtzY2FwZTpjeT0iMjkuMjg1NjI0IiBpbmtzY2FwZTpwYWdlb3BhY2l0eT0iMCIgaW5rc2NhcGU6cGFnZXNoYWRvdz0iMiIgaW5rc2NhcGU6d2luZG93LWhlaWdodD0iMTAxNyIgaW5rc2NhcGU6d2luZG93LW1heGltaXplZD0iMSIgaW5rc2NhcGU6d2luZG93LXdpZHRoPSIxOTIwIiBpbmtzY2FwZTp3aW5kb3cteD0iLTgiIGlua3NjYXBlOndpbmRvdy15PSItOCIgaW5rc2NhcGU6em9vbT0iNC43NTk0MjY3IiBvYmplY3R0b2xlcmFuY2U9IjEwIiBwYWdlY29sb3I9IiNmZmZmZmYiIHNob3dncmlkPSJmYWxzZSI+JiN4YTsJPC9zb2RpcG9kaTpuYW1lZHZpZXc+JiN4YTs8ZyBpZD0iZzE3MyIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTMuMDk4NzMsLTMuMTAxMzc1KSI+JiN4YTsJPHRpdGxlIGlkPSJ0aXRsZTE2NiI+UGFnZS0xPC90aXRsZT4mI3hhOwk8ZyBpZD0ic2hhcGUzNDQ1LTEiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDMuMDk4NzMsLTMuMDk4NzMpIj4mI3hhOwkJPHRpdGxlIGlkPSJ0aXRsZTE2OCI+Q2xvdWQgKEJsYWNrKTwvdGl0bGU+JiN4YTsJCTxwYXRoIGlkPSJwYXRoMTcwIiBpbmtzY2FwZTpjb25uZWN0b3ItY3VydmF0dXJlPSIwIiBzdHlsZT0iZmlsbDojM0Y1NzY1OyIgZD0iTTk4LjYzLDU3LjAyYzAtNi40LTUuMjctMTEuNjctMTEuMjktMTEuNjcgICAgYy0wLjM4LDAtMC43NiwwLTEuNTEsMGMwLjc1LTIuNjQsMS4xMy01LjI3LDEuMTMtOC4yOGMwLTE2Ljk0LTEzLjU1LTMwLjg3LTMwLjQ5LTMwLjg3Yy0xMy41NSwwLTI0Ljg1LDguNjYtMjguOTksMjEuMDggICAgYy0yLjI2LTAuNzUtNC41Mi0xLjEzLTYuNzgtMS4xM0M5LjAzLDI2LjE1LDAsMzUuNTYsMCw0Ny4yM3M5LjQxLDIxLjA4LDIwLjcsMjEuMDhoNjcuNzdDOTQuMTEsNjcuOTQsOTguNjMsNjMuMDQsOTguNjMsNTcuMDJ6Ii8+JiN4YTsJPC9nPiYjeGE7PC9nPiYjeGE7PC9zdmc+;" parent="1" vertex="1">
          <mxGeometry x="1070" y="158" width="255.48" height="160" as="geometry" />
        </mxCell>
        <mxCell id="C8QnYAMO25dNlmI6MnM--74" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="C8QnYAMO25dNlmI6MnM--58" target="C8QnYAMO25dNlmI6MnM--59" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="C8QnYAMO25dNlmI6MnM--75" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="C8QnYAMO25dNlmI6MnM--58" target="C8QnYAMO25dNlmI6MnM--60" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="C8QnYAMO25dNlmI6MnM--58" value="Master" style="aspect=fixed;html=1;points=[];align=center;image;fontSize=12;image=img/lib/mscae/Cache_Redis_Product.svg;" parent="1" vertex="1">
          <mxGeometry x="1448" y="217" width="50" height="42" as="geometry" />
        </mxCell>
        <mxCell id="C8QnYAMO25dNlmI6MnM--59" value="Slave" style="aspect=fixed;html=1;points=[];align=center;image;fontSize=12;image=img/lib/mscae/Cache_Redis_Product.svg;" parent="1" vertex="1">
          <mxGeometry x="1448" y="334" width="50" height="42" as="geometry" />
        </mxCell>
        <mxCell id="C8QnYAMO25dNlmI6MnM--76" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="C8QnYAMO25dNlmI6MnM--60" target="C8QnYAMO25dNlmI6MnM--61" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="C8QnYAMO25dNlmI6MnM--60" value="Master" style="outlineConnect=0;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;shape=mxgraph.aws3.mysql_db_instance;fillColor=#2E73B8;gradientColor=none;" parent="1" vertex="1">
          <mxGeometry x="1598" y="205" width="60" height="64.5" as="geometry" />
        </mxCell>
        <mxCell id="C8QnYAMO25dNlmI6MnM--61" value="Slave" style="outlineConnect=0;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;shape=mxgraph.aws3.mysql_db_instance_2;fillColor=#2E73B8;gradientColor=none;" parent="1" vertex="1">
          <mxGeometry x="1598" y="371.5" width="60" height="63" as="geometry" />
        </mxCell>
        <mxCell id="C8QnYAMO25dNlmI6MnM--66" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="C8QnYAMO25dNlmI6MnM--9" target="C8QnYAMO25dNlmI6MnM--2" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="89.99999999999977" y="130.0000000000001" as="sourcePoint" />
            <mxPoint x="209.99999999999977" y="247.05882352941182" as="targetPoint" />
            <Array as="points">
              <mxPoint x="150" y="347" />
              <mxPoint x="150" y="237" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="C8QnYAMO25dNlmI6MnM--78" value="&lt;h1&gt;&lt;font style=&quot;font-size: 14px&quot;&gt;优化步骤&lt;/font&gt;&lt;/h1&gt;&lt;div&gt;&lt;font size=&quot;3&quot;&gt;1. 前端&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font size=&quot;3&quot;&gt;&amp;nbsp; &amp;nbsp; a. 启用本地缓存，可缓存图片等静态资源；&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font size=&quot;3&quot;&gt;&amp;nbsp; &amp;nbsp; b. 限制用户重复提交，比如提交后按钮置灰等；&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font size=&quot;3&quot;&gt;&amp;nbsp; &amp;nbsp; c. 限制并发用户数量，比如设置验证图片等；&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font size=&quot;3&quot;&gt;&amp;nbsp; &amp;nbsp; d. 设置定时器，提交一次后需间隔多久才内再次操作；&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font size=&quot;3&quot;&gt;&amp;nbsp; &amp;nbsp; e.启用压缩，减少传输占用带宽；&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font size=&quot;3&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font size=&quot;3&quot;&gt;2. 域名服务&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font size=&quot;3&quot;&gt;&amp;nbsp; &amp;nbsp;a. 启用DNS负载分流到不同服务器，机房;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font size=&quot;3&quot;&gt;&amp;nbsp; &amp;nbsp;b. 启用DNS策略，根据不同运营商流量及地域负载到不同机房及接入网；&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font size=&quot;3&quot;&gt;&amp;nbsp; &amp;nbsp;c. 启用CDN，将静态文件或流数据缓存到不同地域CDN服务器；&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font size=&quot;3&quot;&gt;&amp;nbsp; &amp;nbsp;d. 如果是app，可以使用httpDNS进行自建DNS负载；&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font size=&quot;3&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font size=&quot;3&quot;&gt;3. 接入层&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font size=&quot;3&quot;&gt;&amp;nbsp; &amp;nbsp;a. F5负载，LVS负载；&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font size=&quot;3&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font size=&quot;3&quot;&gt;4. Nginx服务器&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font size=&quot;3&quot;&gt;&amp;nbsp; &amp;nbsp;a. 对timewait的端口进行回收和复用；&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font size=&quot;3&quot;&gt;&amp;nbsp; &amp;nbsp;b. 增大timewait队列；&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font size=&quot;3&quot;&gt;&amp;nbsp; &amp;nbsp;c. 增大somaxconn，内核运行的最大连接数量;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font size=&quot;3&quot;&gt;&amp;nbsp; &amp;nbsp;d. 增大最大的syn队列，启用syncookies，减少synack和syn的重试次数；&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font size=&quot;3&quot;&gt;&amp;nbsp; &amp;nbsp;e. 减少timewait时间，减少keeplive time；&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font size=&quot;3&quot;&gt;&amp;nbsp; &amp;nbsp;f.&amp;nbsp; 减少fin timeout时间;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font size=&quot;3&quot;&gt;&amp;nbsp; &amp;nbsp;g. 增加varnish组件，进行盘挂式缓存；&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;span style=&quot;font-size: medium&quot;&gt;&amp;nbsp; &amp;nbsp;h. 可以进行链路聚合，增加服务器的可靠性和带宽;&lt;/span&gt;&lt;div&gt;&lt;font size=&quot;3&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font size=&quot;3&quot;&gt;5. 服务层&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font size=&quot;3&quot;&gt;&amp;nbsp; &amp;nbsp;a. 进行分布式架构，将不同流量分发到不同服务内;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font size=&quot;3&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font size=&quot;3&quot;&gt;6. redis层&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font size=&quot;3&quot;&gt;&amp;nbsp; &amp;nbsp;a. 使用master slave 或哨兵模式进行主从架构（读写分离），或使用集群模式（缓存数据量大，分布到不同节点上）；&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font size=&quot;3&quot;&gt;&amp;nbsp; &amp;nbsp;b. CPU绑定技术，避免主线程被切换出来，减少上下文切换；&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font size=&quot;3&quot;&gt;&amp;nbsp; &amp;nbsp;c. 避免大键或值进行缓存，如果有，建议拆分成小值范围内容；&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font size=&quot;3&quot;&gt;&amp;nbsp; &amp;nbsp;d. 选择合理的数据结构进行存储；&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font size=&quot;3&quot;&gt;&amp;nbsp; &amp;nbsp;e. 避免使用耗时的操作，例如聚合，范围查询，统计等，尽量使用简单的读写；&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font size=&quot;3&quot;&gt;&amp;nbsp; &amp;nbsp;f.&amp;nbsp; 使用布隆过滤器来过滤非法请求，使用并发锁，避免所有数据都请求到数据库中，设置合理的过期时间；&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font size=&quot;3&quot;&gt;&amp;nbsp; &amp;nbsp;h. 增加二级缓存，例如AeroSpike这种基于硬盘的二级缓存；&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font size=&quot;3&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font size=&quot;3&quot;&gt;7. 数据库层面&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font size=&quot;3&quot;&gt;&amp;nbsp; &amp;nbsp;a. 使用SSD硬盘；&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font size=&quot;3&quot;&gt;&amp;nbsp; &amp;nbsp;b. 只查询需要的数据，少占用带宽；&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font size=&quot;3&quot;&gt;&amp;nbsp; &amp;nbsp;c. 优化sql，例如查询是否存在，直接select 1，或使用exist这种；&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font size=&quot;3&quot;&gt;&amp;nbsp; &amp;nbsp;e. 优化索引及优化sql尽量使用索引，减少回表、使用索引覆盖、索引下推，使用最左匹配原则；&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font size=&quot;3&quot;&gt;&amp;nbsp; &amp;nbsp;f.&amp;nbsp; 分页查询，使用最大ID，如果使用limit查询数据量大的时候，查询后面的分页会变慢；&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font size=&quot;3&quot;&gt;&amp;nbsp; &amp;nbsp;g. 对于字段较多，单行数据量大的，使用分表，使数据页在一页内可以保存更多数据，避免过多的磁盘扫描；&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font size=&quot;3&quot;&gt;&amp;nbsp; &amp;nbsp;h. 对于数据行数较大，超过5KW时，可以分表；&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font size=&quot;3&quot;&gt;&amp;nbsp; &amp;nbsp;i.&amp;nbsp; 对于并发较大，单机无法承担时，可以使用读写分离；&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font size=&quot;3&quot;&gt;&amp;nbsp; &amp;nbsp;j. 对于并发写较大，单机无法承受时，可以使用分库；&amp;nbsp;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font size=&quot;3&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;" style="text;html=1;strokeColor=none;fillColor=none;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="26" y="586" width="1016" height="993" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
